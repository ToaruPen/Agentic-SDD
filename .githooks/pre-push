#!/bin/sh
set -eu

if ! command -v python3 >/dev/null 2>&1; then
  echo "[agentic-sdd gate] BLOCKED: python3 is required for approval validation." >&2
  exit 1
fi

ROOT="$(git rev-parse --show-toplevel 2>/dev/null || true)"
if [ -z "$ROOT" ]; then
  exit 0
fi

cd "$ROOT"

if [ ! -f "scripts/validate-approval.py" ]; then
  exit 0
fi

python3 scripts/validate-approval.py

