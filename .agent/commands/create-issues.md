# /create-issues

EpicからIssueを作成するコマンド。

## 使用方法

```
/create-issues [Epicファイル名]
```

## 実行フロー

### Phase 1: Epic読み込み

1. 指定されたEpicファイルを読み込み
2. セクション4「Issue分割案」を抽出
3. 依存関係を確認

### Phase 2: 粒度チェック

各Issueが以下の粒度規約を満たすかチェック：

| 指標 | 目安 |
|-----|------|
| 変更行数 | 50〜300行 |
| 変更ファイル数 | 1〜5ファイル |
| AC数 | 2〜5個 |

### Phase 3: 分割サイン検出

#### 大きすぎるサイン（分割が必要）

- [ ] 変更行数が300行を超える見込み
- [ ] 変更ファイル数が6ファイル以上
- [ ] ACが6個以上ある
- [ ] 「〜と〜と〜をする」のように複数の動詞がある

#### 小さすぎるサイン（統合を検討）

- [ ] 変更行数が50行未満
- [ ] ACが1個だけ
- [ ] 他のIssueと常にセットで作業する

### Phase 4: 例外ラベルの適用

原則を外れる場合は、以下のラベルを付与し**必須項目を記入**：

| ラベル | 用途 | 必須: 理由 | 必須: 影響/レビュー観点 | 必須: 想定リスク |
|-------|------|----------|----------------------|----------------|
| `bulk-format` | 自動整形/リネーム | 整形ツール名 | 機能変更がないことを確認 | 意図しない変更混入 |
| `test-heavy` | テスト追加で行数増 | テスト対象 | テストカバレッジ確認 | テスト漏れ |
| `config-risk` | 設定変更で影響大 | 変更内容 | 影響範囲の特定 | 設定ミスによる障害 |
| `refactor-scope` | リファクタで広範囲 | リファクタ目的 | 既存動作の維持確認 | 予期しない動作変更 |

### Phase 5: Issue本文の生成

```markdown
## 概要

[Epicから引き継いだ説明]

## 背景

- Epic: [Epicファイルへのリンク]
- PRD: [PRDファイルへのリンク]

## 受け入れ条件（AC）

- [ ] AC1: [観測可能な条件]
- [ ] AC2: [観測可能な条件]

## 技術メモ

- 変更対象ファイル: [ファイル一覧]
- 推定行数: [50-100行]

## 依存関係

- Blocked by: #[Issue番号]（[理由]）
- 先に終わると何が可能になるか: [説明]

## ラベル

- [ ] `parallel-ok` / `blocked`
- [ ] 例外ラベル（該当する場合）
```

### Phase 6: 依存関係の表現

- Issue本文に「Blocked by #xxx」を記載
- Issue本文に「先に終わると何が可能になるか」を1行追加
- ラベル「blocked」「parallel-ok」を付与

### Phase 7: Issue作成

1. GitHub Issue として作成（`gh issue create` を使用）
2. または、ローカルファイルとして出力

## 出力形式

### GitHub Issue作成時

```bash
gh issue create --title "[Issue名]" --body "[本文]" --label "[ラベル]"
```

### ローカルファイル出力時

```
issues/
├── 001-環境構築.md
├── 002-DBスキーマ作成.md
└── 003-ユーザーAPI実装.md
```

## オプション

| オプション | 説明 |
|-----------|------|
| `--dry-run` | Issue作成せずプレビューのみ |
| `--local` | GitHub Issueではなくローカルファイルに出力 |
| `--start [番号]` | 指定番号のIssueから作成開始 |

## 関連ルール

- `.agent/rules/issue.md` - Issue粒度規約
- `.agent/rules/epic.md` - Epic生成ルール
- `.agent/rules/docs-sync.md` - ドキュメント同期ルール

## 次のコマンド

Issue作成後は `/impl` を実行して実装を開始する。
