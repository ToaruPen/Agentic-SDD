# データモデル定義

プロジェクトのデータモデル（エンティティ、リレーション）を定義するドキュメント。

---

## 概要

このドキュメントでは、プロジェクトで使用するデータモデルを定義します。
PRD/Epicで決定した要件に基づいて、具体的なスキーマを記載してください。

---

## エンティティ一覧

| エンティティ | 説明 | テーブル名 |
|-------------|------|-----------|
| [例: User] | [ユーザー情報] | [users] |
| [例: Post] | [投稿情報] | [posts] |

---

## エンティティ詳細

### [エンティティ名]

**説明**: [このエンティティの役割]

**テーブル名**: `[table_name]`

#### カラム定義

| カラム名 | 型 | 必須 | デフォルト | 説明 |
|---------|---|------|----------|------|
| id | UUID/BIGINT | Yes | auto | 主キー |
| [column] | [type] | [Yes/No] | [default] | [説明] |
| created_at | TIMESTAMP | Yes | now() | 作成日時 |
| updated_at | TIMESTAMP | Yes | now() | 更新日時 |

#### インデックス

| インデックス名 | カラム | 種類 | 用途 |
|---------------|-------|------|------|
| [idx_name] | [column] | [UNIQUE/INDEX] | [検索用途] |

#### リレーション

| 関連先 | 種類 | 外部キー | 説明 |
|-------|------|---------|------|
| [Entity] | [1:N/N:1/N:N] | [fk_column] | [関連の説明] |

---

## ER図

```
┌─────────────┐       ┌─────────────┐
│    User     │       │    Post     │
├─────────────┤       ├─────────────┤
│ id (PK)     │───┐   │ id (PK)     │
│ email       │   │   │ title       │
│ name        │   └──<│ user_id(FK) │
│ created_at  │       │ content     │
│ updated_at  │       │ created_at  │
└─────────────┘       │ updated_at  │
                      └─────────────┘

記号:
  ──<  1対多
  >──< 多対多
  ──── 1対1
```

---

## 制約・ルール

### 一意制約

| エンティティ | カラム | 説明 |
|-------------|-------|------|
| [User] | [email] | [メールアドレスは一意] |

### 外部キー制約

| 子テーブル | 親テーブル | ON DELETE | ON UPDATE |
|-----------|-----------|-----------|-----------|
| [posts] | [users] | [CASCADE/SET NULL/RESTRICT] | [CASCADE] |

### チェック制約

| テーブル | カラム | 制約 |
|---------|-------|------|
| [users] | [age] | [age >= 0] |

---

## 列挙型（Enum）

### [EnumName]

| 値 | 説明 |
|---|------|
| [VALUE_1] | [説明] |
| [VALUE_2] | [説明] |

---

## マイグレーション履歴

| バージョン | 日付 | 内容 |
|-----------|------|------|
| 001 | YYYY-MM-DD | 初期スキーマ作成 |
| 002 | YYYY-MM-DD | [変更内容] |

---

## 注意事項

### 命名規則

| 対象 | 規則 | 例 |
|-----|------|---|
| テーブル名 | スネークケース、複数形 | `users`, `user_profiles` |
| カラム名 | スネークケース | `created_at`, `user_id` |
| インデックス名 | `idx_テーブル_カラム` | `idx_users_email` |
| 外部キー名 | `fk_テーブル_参照テーブル` | `fk_posts_users` |

### 共通カラム

すべてのテーブルに以下を含める：

| カラム | 型 | 説明 |
|-------|---|------|
| id | UUID or BIGINT | 主キー |
| created_at | TIMESTAMP | 作成日時 |
| updated_at | TIMESTAMP | 更新日時 |

### 論理削除（使用する場合）

| カラム | 型 | 説明 |
|-------|---|------|
| deleted_at | TIMESTAMP NULL | 削除日時（NULLなら未削除） |

---

## 関連ファイル

- `docs/prd/*.md` - PRD（要件）
- `docs/epics/*.md` - Epic（実装計画）
- `docs/decisions.md` - 技術的意思決定
